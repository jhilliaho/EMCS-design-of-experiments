<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - lib/index.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet">
  <link href="../../assets/css/plato.css" rel="stylesheet">
  <link href="../../assets/css/plato-file.css" rel="stylesheet">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="http://github.com/es-analysis/plato">Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>lib/index.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">64.62</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">297</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">65.77</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">2.87</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">/**
 * Module dependencies.
 */

var colors = require(&#039;colors/safe&#039;)
  , utils = require(&#039;./utils&#039;)
  , repeat = utils.repeat
  , truncate = utils.truncate
  , pad = utils.pad;

/**
 * Table constructor
 *
 * @param {Object} options
 * @api public
 */

function Table (options){
  this.options = utils.options({
      chars: {
          &#039;top&#039;: &#039;─&#039;
        , &#039;top-mid&#039;: &#039;┬&#039;
        , &#039;top-left&#039;: &#039;┌&#039;
        , &#039;top-right&#039;: &#039;┐&#039;
        , &#039;bottom&#039;: &#039;─&#039;
        , &#039;bottom-mid&#039;: &#039;┴&#039;
        , &#039;bottom-left&#039;: &#039;└&#039;
        , &#039;bottom-right&#039;: &#039;┘&#039;
        , &#039;left&#039;: &#039;│&#039;
        , &#039;left-mid&#039;: &#039;├&#039;
        , &#039;mid&#039;: &#039;─&#039;
        , &#039;mid-mid&#039;: &#039;┼&#039;
        , &#039;right&#039;: &#039;│&#039;
        , &#039;right-mid&#039;: &#039;┤&#039;
        , &#039;middle&#039;: &#039;│&#039;
      }
    , truncate: &#039;…&#039;
    , colWidths: []
    , colAligns: []
    , style: {
          &#039;padding-left&#039;: 1
        , &#039;padding-right&#039;: 1
        , head: [&#039;red&#039;]
        , border: [&#039;grey&#039;]
        , compact : false
      }
    , head: []
  }, options);
};

/**
 * Inherit from Array.
 */

Table.prototype.__proto__ = Array.prototype;

/**
 * Width getter
 *
 * @return {Number} width
 * @api public
 */

Table.prototype.__defineGetter__(&#039;width&#039;, function (){
  var str = this.toString().split(&quot;\n&quot;);
  if (str.length) return str[0].length;
  return 0;
});

/**
 * Render to a string.
 *
 * @return {String} table representation
 * @api public
 */

Table.prototype.render
Table.prototype.toString = function (){
  var ret = &#039;&#039;
    , options = this.options
    , style = options.style
    , head = options.head
    , chars = options.chars
    , truncater = options.truncate
      , colWidths = options.colWidths || new Array(this.head.length)
      , totalWidth = 0;

    if (!head.length &amp;&amp; !this.length) return &#039;&#039;;

    if (!colWidths.length){
      var all_rows = this.slice(0);
      if (head.length) { all_rows = all_rows.concat([head]) };

      all_rows.forEach(function(cells){
        // horizontal (arrays)
        if (typeof cells === &#039;object&#039; &amp;&amp; cells.length) {
          extractColumnWidths(cells);

        // vertical (objects)
        } else {
          var header_cell = Object.keys(cells)[0]
            , value_cell = cells[header_cell];

          colWidths[0] = Math.max(colWidths[0] || 0, get_width(header_cell) || 0);

          // cross (objects w/ array values)
          if (typeof value_cell === &#039;object&#039; &amp;&amp; value_cell.length) {
            extractColumnWidths(value_cell, 1);
          } else {
            colWidths[1] = Math.max(colWidths[1] || 0, get_width(value_cell) || 0);
          }
        }
    });
  };

  totalWidth = (colWidths.length == 1 ? colWidths[0] : colWidths.reduce(
    function (a, b){
      return a + b
    })) + colWidths.length + 1;

  function extractColumnWidths(arr, offset) {
    var offset = offset || 0;
    arr.forEach(function(cell, i){
      colWidths[i + offset] = Math.max(colWidths[i + offset] || 0, get_width(cell) || 0);
    });
  };

  function get_width(obj) {
    return typeof obj == &#039;object&#039; &amp;&amp; obj &amp;&amp; obj.width != undefined
         ? obj.width
         : ((typeof obj == &#039;object&#039; &amp;&amp; obj !== null ? utils.strlen(obj.text) : utils.strlen(obj)) + (style[&#039;padding-left&#039;] || 0) + (style[&#039;padding-right&#039;] || 0))
  }

  // draws a line
  function line (line, left, right, intersection){
    var width = 0
      , line =
          left
        + repeat(line, totalWidth - 2)
        + right;

    colWidths.forEach(function (w, i){
      if (i == colWidths.length - 1) return;
      width += w + 1;
      line = line.substr(0, width) + intersection + line.substr(width + 1);
    });

    return applyStyles(options.style.border, line);
  };

  // draws the top line
  function lineTop (){
    var l = line(chars.top
               , chars[&#039;top-left&#039;] || chars.top
               , chars[&#039;top-right&#039;] ||  chars.top
               , chars[&#039;top-mid&#039;]);
    if (l)
      ret += l + &quot;\n&quot;;
  };

  function generateRow (items, style) {
    var cells = []
      , max_height = 0;

    // prepare vertical and cross table data
    if (!Array.isArray(items) &amp;&amp; typeof items === &quot;object&quot;) {
      var key = Object.keys(items)[0]
        , value = items[key]
        , first_cell_head = true;

      if (Array.isArray(value)) {
        items = value;
        items.unshift(key);
      } else {
        items = [key, value];
      }
    }

    // transform array of item strings into structure of cells
    items.forEach(function (item, i) {
      var contents = (item == null ? &#039;&#039; : item).toString().split(&quot;\n&quot;).reduce(function (memo, l) {
        memo.push(string(l, i));
        return memo;
      }, [])

      var height = contents.length;
      if (height &gt; max_height) { max_height = height };

      cells.push({ contents: contents , height: height });
    });

    // transform vertical cells into horizontal lines
    var lines = new Array(max_height);
    cells.forEach(function (cell, i) {
      cell.contents.forEach(function (line, j) {
        if (!lines[j]) { lines[j] = [] };
        if (style || (first_cell_head &amp;&amp; i === 0 &amp;&amp; options.style.head)) {
          line = applyStyles(options.style.head, line)
        }

        lines[j].push(line);
      });

      // populate empty lines in cell
      for (var j = cell.height, l = max_height; j &lt; l; j++) {
        if (!lines[j]) { lines[j] = [] };
        lines[j].push(string(&#039;&#039;, i));
      }
    });
    var ret = &quot;&quot;;
    lines.forEach(function (line, index) {
      if (ret.length &gt; 0) {
        ret += &quot;\n&quot; + applyStyles(options.style.border, chars.left);
      }

      ret += line.join(applyStyles(options.style.border, chars.middle)) + applyStyles(options.style.border, chars.right);
    });

    return applyStyles(options.style.border, chars.left) + ret;
  };

  function applyStyles(styles, subject) {
    if (!subject)
      return &#039;&#039;;
    styles.forEach(function(style) {
      subject = colors[style](subject);
    });
    return subject;
  };

  // renders a string, by padding it or truncating it
  function string (str, index){
    var str = String(typeof str == &#039;object&#039; &amp;&amp; str.text ? str.text : str)
      , length = utils.strlen(str)
      , width = colWidths[index]
          - (style[&#039;padding-left&#039;] || 0)
          - (style[&#039;padding-right&#039;] || 0)
      , align = options.colAligns[index] || &#039;left&#039;;

    return repeat(&#039; &#039;, style[&#039;padding-left&#039;] || 0)
         + (length == width ? str :
             (length &lt; width
              ? pad(str, ( width + (str.length - length) ), &#039; &#039;, align == &#039;left&#039; ? &#039;right&#039; :
                  (align == &#039;middle&#039; ? &#039;both&#039; : &#039;left&#039;))
              : (truncater ? truncate(str, width, truncater) : str))
           )
         + repeat(&#039; &#039;, style[&#039;padding-right&#039;] || 0);
  };

  if (head.length){
    lineTop();

    ret += generateRow(head, style.head) + &quot;\n&quot;
  }

  if (this.length)
    this.forEach(function (cells, i){
      if (!head.length &amp;&amp; i == 0)
        lineTop();
      else {
        if (!style.compact || i&lt;(!!head.length) ?1:0 || cells.length == 0){
          var l = line(chars.mid
                     , chars[&#039;left-mid&#039;]
                     , chars[&#039;right-mid&#039;]
                     , chars[&#039;mid-mid&#039;]);
          if (l)
            ret += l + &quot;\n&quot;
        }
      }

      if (cells.hasOwnProperty(&quot;length&quot;) &amp;&amp; !cells.length) {
        return
      } else {
        ret += generateRow(cells) + &quot;\n&quot;;
      };
    });

  var l = line(chars.bottom
             , chars[&#039;bottom-left&#039;] || chars.bottom
             , chars[&#039;bottom-right&#039;] || chars.bottom
             , chars[&#039;bottom-mid&#039;]);
  if (l)
    ret += l;
  else
    // trim the last &#039;\n&#039; if we didn&#039;t add the bottom decoration
    ret = ret.slice(0, -1);

  return ret;
};

/**
 * Module exports.
 */

module.exports = Table;

module.exports.version = &#039;0.0.1&#039;;</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ cyclomatic }} <br>
    Length : {{ halstead.length }} <br>
    Difficulty : {{ halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
